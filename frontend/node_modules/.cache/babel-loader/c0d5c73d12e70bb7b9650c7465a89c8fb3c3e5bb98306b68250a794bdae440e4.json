{"ast":null,"code":"var _jsxFileName = \"D:\\\\MailChat\\\\ChatMail\\\\frontend\\\\src\\\\components\\\\EmailList.jsx\",\n  _s = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useEditor, EditorContent } from '@tiptap/react';\nimport StarterKit from '@tiptap/starter-kit';\nimport './EmailList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction cleanBody(html) {\n  if (!html || typeof html !== 'string') return '';\n  return html.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '').replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '').replace(/<\\/?(html|head|body|meta|title|link)[^>]*>/gi, '').replace(/<div[^>]+class=\"gmail_quote\"[^>]*>[\\s\\S]*$/gi, '').replace(/<blockquote[^>]*>[\\s\\S]*?<\\/blockquote>/gi, '').replace(/&nbsp;/g, ' ').replace(/\\s{2,}/g, ' ').trim();\n}\nfunction getDateLabel(dateStr) {\n  const date = new Date(dateStr);\n  const today = new Date();\n  const yesterday = new Date();\n  yesterday.setDate(today.getDate() - 1);\n  if (date.toDateString() === today.toDateString()) return 'Today';\n  if (date.toDateString() === yesterday.toDateString()) return 'Yesterday';\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    weekday: 'long'\n  });\n}\n\n// Simple editor factory function to create multiple editors\nfunction useCreateEditor() {\n  _s();\n  return useEditor({\n    extensions: [StarterKit],\n    editorProps: {\n      handleKeyDown(view, event) {\n        if (event.key === 'Tab') {\n          event.preventDefault();\n          view.dispatch(view.state.tr.insertText('    ') // inserts 4 spaces as indent\n          );\n          return true;\n        }\n        return false;\n      }\n    },\n    content: ''\n  });\n}\n_s(useCreateEditor, \"Y0m68CG3DQ+w7nDf2INtvOkmtxE=\", false, function () {\n  return [useEditor];\n});\nexport default function EmailList({\n  token\n}) {\n  _s3();\n  const [profile, setProfile] = useState(null);\n  const [threads, setThreads] = useState([]);\n  const [search, setSearch] = useState('');\n  const [userEmail, setUserEmail] = useState('');\n  const [followEmails, setFollowEmails] = useState([]);\n  const [emailInput, setEmailInput] = useState('');\n  const [threadStates, setThreadStates] = useState({});\n  const [viewMode, setViewMode] = useState('grid'); // 'grid' or 'list'\n  const [editors, setEditors] = useState({});\n\n  // Initialize thread states when threads change\n  useEffect(() => {\n    const initialStates = {};\n    threads.forEach(thread => {\n      if (!threadStates[thread.id]) {\n        initialStates[thread.id] = {\n          expanded: false,\n          threadSearch: '',\n          showPreview: false,\n          pendingReplyMeta: null,\n          attachments: [],\n          editor: null // Will be set when expanded\n        };\n      }\n    });\n    if (Object.keys(initialStates).length > 0) {\n      setThreadStates(prev => ({\n        ...prev,\n        ...initialStates\n      }));\n    }\n  }, [threads]);\n  useEffect(() => {\n    const fetchEmails = async () => {\n      try {\n        const res = await axios.post('http://localhost:5000/api/emails/followed', {\n          senders: followEmails\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          },\n          withCredentials: true\n        });\n        setThreads(res.data);\n      } catch (error) {\n        var _error$response;\n        console.error('❌ Email fetch failed:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      }\n    };\n    if (followEmails.length > 0) {\n      fetchEmails();\n    }\n  }, [followEmails, token]);\n  const handleAddEmail = () => {\n    if (emailInput && !followEmails.includes(emailInput)) {\n      setFollowEmails(prev => [...prev, emailInput]);\n      setEmailInput('');\n    }\n  };\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const res = await axios.get('http://localhost:5000/api/profile', {\n          withCredentials: true\n        });\n        setProfile(res.data);\n        setUserEmail(res.data.email);\n      } catch (err) {\n        console.error('❌ Failed to load profile:', err.message);\n      }\n    };\n    fetchProfile();\n  }, []);\n  const toggleThread = threadId => {\n    var _s2 = $RefreshSig$();\n    _s2(setThreadStates(_s2(prev => {\n      _s2();\n      const updatedState = {\n        ...prev\n      };\n\n      // If we're expanding a thread and no editor exists, create one\n      if (!updatedState[threadId].expanded && !updatedState[threadId].editor) {\n        updatedState[threadId].editor = useCreateEditor();\n      }\n      updatedState[threadId] = {\n        ...updatedState[threadId],\n        expanded: !updatedState[threadId].expanded,\n        threadSearch: ''\n      };\n      return updatedState;\n    }, \"vRlVoCZeEcPwFqGG3IUMj7QqdXE=\", false, function () {\n      return [useCreateEditor];\n    })), \"vRlVoCZeEcPwFqGG3IUMj7QqdXE=\", false, function () {\n      return [useCreateEditor];\n    });\n  };\n  const getInitials = from => {\n    const name = from.split('<')[0].trim();\n    return name.split(' ').map(word => word[0]).join('').slice(0, 2).toUpperCase();\n  };\n  const appendLocalReply = (threadId, message) => {\n    setThreads(prev => prev.map(t => {\n      if (t.id !== threadId) return t;\n      return {\n        ...t,\n        messages: [...t.messages, message]\n      };\n    }));\n  };\n  const sendReply = async (threadId, to, subject, isDraft) => {\n    var _threadStates$threadI;\n    const editor = (_threadStates$threadI = threadStates[threadId]) === null || _threadStates$threadI === void 0 ? void 0 : _threadStates$threadI.editor;\n    if (!editor) return;\n    const html = editor.getHTML();\n    try {\n      await axios.post('http://localhost:5000/api/reply', {\n        threadId,\n        to,\n        subject,\n        message: html,\n        draft: isDraft\n      }, {\n        withCredentials: true\n      });\n      appendLocalReply(threadId, {\n        from: userEmail,\n        subject,\n        date: new Date().toISOString(),\n        body: html\n      });\n      if (isDraft) {\n        alert('✅ Draft saved!');\n      } else {\n        alert('✅ Reply sent!');\n      }\n      editor.commands.setContent('');\n\n      // Reset thread state\n      setThreadStates(prev => ({\n        ...prev,\n        [threadId]: {\n          ...prev[threadId],\n          showPreview: false,\n          pendingReplyMeta: null,\n          attachments: []\n        }\n      }));\n    } catch (err) {\n      console.error('❌ Reply failed:', err);\n      alert('Failed to send reply.');\n    }\n  };\n  const setThreadSearch = (threadId, value) => {\n    setThreadStates(prev => ({\n      ...prev,\n      [threadId]: {\n        ...prev[threadId],\n        threadSearch: value\n      }\n    }));\n  };\n  const setAttachments = (threadId, newAttachments) => {\n    setThreadStates(prev => ({\n      ...prev,\n      [threadId]: {\n        ...prev[threadId],\n        attachments: newAttachments\n      }\n    }));\n  };\n  const setPendingReplyMeta = (threadId, meta) => {\n    setThreadStates(prev => ({\n      ...prev,\n      [threadId]: {\n        ...prev[threadId],\n        pendingReplyMeta: meta,\n        showPreview: true\n      }\n    }));\n  };\n  const setShowPreview = (threadId, value) => {\n    setThreadStates(prev => ({\n      ...prev,\n      [threadId]: {\n        ...prev[threadId],\n        showPreview: value\n      }\n    }));\n  };\n  const filteredThreads = threads.filter(thread => {\n    var _thread$subject, _thread$messages;\n    return ((_thread$subject = thread.subject) === null || _thread$subject === void 0 ? void 0 : _thread$subject.toLowerCase().includes(search.toLowerCase())) || ((_thread$messages = thread.messages) === null || _thread$messages === void 0 ? void 0 : _thread$messages.some(msg => {\n      var _msg$from, _msg$body;\n      return ((_msg$from = msg.from) === null || _msg$from === void 0 ? void 0 : _msg$from.toLowerCase().includes(search.toLowerCase())) || ((_msg$body = msg.body) === null || _msg$body === void 0 ? void 0 : _msg$body.toLowerCase().includes(search.toLowerCase()));\n    }));\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"email-list\",\n    style: {\n      padding: '20px',\n      fontFamily: 'Arial, sans-serif'\n    },\n    children: [profile && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        marginBottom: '20px',\n        padding: '10px',\n        backgroundColor: '#f0f0f0',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: profile.picture,\n        alt: \"avatar\",\n        style: {\n          borderRadius: '50%',\n          width: 40,\n          height: 40,\n          marginRight: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: profile.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.9em',\n            color: '#666'\n          },\n          children: profile.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uD83D\\uDD0D Search all threads...\",\n        value: search,\n        onChange: e => setSearch(e.target.value),\n        style: {\n          padding: '10px',\n          width: '100%',\n          marginBottom: '10px',\n          borderRadius: '8px',\n          border: '1px solid #ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Add email to follow...\",\n          value: emailInput,\n          onChange: e => setEmailInput(e.target.value),\n          style: {\n            padding: '10px',\n            flex: 1,\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddEmail,\n          style: {\n            padding: '10px',\n            backgroundColor: '#2196f3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer'\n          },\n          children: \"Add Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          children: followEmails.length > 0 ? `Following ${followEmails.length} email${followEmails.length > 1 ? 's' : ''}` : 'No emails followed yet'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setViewMode('grid'),\n            style: {\n              padding: '5px 10px',\n              backgroundColor: viewMode === 'grid' ? '#2196f3' : '#e0e0e0',\n              color: viewMode === 'grid' ? 'white' : 'black',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            },\n            children: \"Grid View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setViewMode('list'),\n            style: {\n              padding: '5px 10px',\n              backgroundColor: viewMode === 'list' ? '#2196f3' : '#e0e0e0',\n              color: viewMode === 'list' ? 'white' : 'black',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            },\n            children: \"List View\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: '8px',\n          marginTop: '10px'\n        },\n        children: followEmails.map((email, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            backgroundColor: '#e3f2fd',\n            borderRadius: '20px',\n            padding: '5px 10px',\n            border: '1px solid #bbdefb'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setFollowEmails(prev => prev.filter((_, i) => i !== index)),\n            style: {\n              marginLeft: '5px',\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              color: '#f44336',\n              fontWeight: 'bold',\n              fontSize: '16px'\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), filteredThreads.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: viewMode === 'grid' ? {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fill, minmax(350px, 1fr))',\n        gap: '20px'\n      } : {},\n      children: filteredThreads.map(thread => {\n        const threadState = threadStates[thread.id] || {\n          expanded: false,\n          threadSearch: '',\n          showPreview: false,\n          pendingReplyMeta: null,\n          attachments: [],\n          editor: null\n        };\n        const expanded = threadState.expanded;\n        const threadSearch = threadState.threadSearch || '';\n        const attachments = threadState.attachments || [];\n        const editor = threadState.editor;\n        const filteredMsgs = thread.messages.filter(msg => msg.from.toLowerCase().includes(threadSearch.toLowerCase()) || msg.body.toLowerCase().includes(threadSearch.toLowerCase()));\n        let lastDateLabel = '';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `email-thread ${expanded ? 'expanded' : ''}`,\n          style: {\n            border: '2px solid #ccc',\n            borderRadius: '10px',\n            padding: '15px',\n            marginBottom: viewMode === 'list' ? '25px' : '0',\n            backgroundColor: '#fafafa',\n            boxShadow: '0 2px 6px rgba(0,0,0,0.05)',\n            borderTop: '5px solid #2196f3',\n            // Visual accent\n            display: 'flex',\n            flexDirection: 'column'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              cursor: 'pointer'\n            },\n            onClick: () => toggleThread(thread.id),\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: '0 0 5px 0',\n                color: '#333',\n                flex: 1\n              },\n              children: [\"\\uD83D\\uDCEC \", thread.subject || '(no subject)']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                transform: expanded ? 'rotate(180deg)' : 'rotate(0)',\n                transition: 'transform 0.3s',\n                fontSize: '1.2em'\n              },\n              children: \"\\u25BC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '0.85em',\n              color: '#666',\n              marginBottom: '10px'\n            },\n            children: [thread.messages.length, \" message\", thread.messages.length !== 1 ? 's' : '', \" \\u2022 Last activity: \", new Date(thread.messages[thread.messages.length - 1].date).toLocaleString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 17\n          }, this), expanded && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search in this thread...\",\n              value: threadSearch,\n              onChange: e => setThreadSearch(thread.id, e.target.value),\n              style: {\n                padding: '8px',\n                width: '100%',\n                marginBottom: '15px',\n                borderRadius: '6px',\n                border: '1px solid #aaa'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: '400px',\n                overflowY: 'auto',\n                paddingRight: '10px',\n                border: '1px solid #e0e0e0',\n                borderRadius: '8px',\n                padding: '10px',\n                backgroundColor: '#f5f5f5'\n              },\n              children: filteredMsgs.map((msg, i) => {\n                const dateLabel = getDateLabel(msg.date);\n                const showDateLabel = dateLabel !== lastDateLabel;\n                lastDateLabel = dateLabel;\n                const isMe = msg.from.includes(userEmail);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexDirection: 'column'\n                  },\n                  children: [showDateLabel && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: 'center',\n                      margin: '15px 0 5px',\n                      color: '#666',\n                      fontSize: '0.85em',\n                      fontWeight: 'bold'\n                    },\n                    children: [\"\\u2500\\u2500 \", dateLabel, \" \\u2500\\u2500\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `message ${isMe ? 'sent' : 'received'}`,\n                    style: {\n                      display: 'flex',\n                      flexDirection: isMe ? 'row-reverse' : 'row',\n                      alignSelf: isMe ? 'flex-end' : 'flex-start',\n                      maxWidth: '75%',\n                      backgroundColor: isMe ? '#dcf8c6' : '#fff',\n                      padding: '10px',\n                      borderRadius: '10px',\n                      margin: '5px 0',\n                      border: isMe ? '1px solid #a2d5a2' : '1px solid #ccc',\n                      boxShadow: '0 1px 3px rgba(0,0,0,0.05)',\n                      textAlign: isMe ? 'right' : 'left'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"avatar\",\n                      style: {\n                        backgroundColor: isMe ? '#4caf50' : '#888',\n                        color: '#fff',\n                        borderRadius: '50%',\n                        width: '36px',\n                        height: '36px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontWeight: 'bold',\n                        fontSize: '0.9em',\n                        margin: isMe ? '0 0 0 10px' : '0 10px 0 0'\n                      },\n                      children: isMe ? 'You' : getInitials(msg.from)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 474,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        flex: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontWeight: 'bold'\n                        },\n                        children: isMe ? 'You' : msg.from\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 490,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"email-body\",\n                        style: {\n                          marginTop: '6px',\n                          marginBottom: '8px'\n                        },\n                        dangerouslySetInnerHTML: {\n                          __html: cleanBody(msg.body)\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 491,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontSize: '0.8em',\n                          color: '#888'\n                        },\n                        children: new Date(msg.date).toLocaleString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 493,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 489,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 29\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 27\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '15px',\n                border: '1px solid #e0e0e0',\n                borderRadius: '8px',\n                padding: '15px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                style: {\n                  margin: '0 0 10px 0'\n                },\n                children: \"Reply\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 23\n              }, this), editor && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '8px',\n                  display: 'flex',\n                  gap: '8px',\n                  flexWrap: 'wrap'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleBold().run(),\n                  className: editor.isActive('bold') ? 'active' : '',\n                  title: \"Bold\",\n                  \"aria-label\": \"Bold\",\n                  style: {\n                    fontWeight: 'bold',\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('bold') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleItalic().run(),\n                  style: {\n                    fontStyle: 'italic',\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('italic') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"I\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleStrike().run(),\n                  style: {\n                    textDecoration: 'line-through',\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('strike') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"S\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().setParagraph().run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('paragraph') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"P\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleHeading({\n                    level: 1\n                  }).run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('heading', {\n                      level: 1\n                    }) ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"H1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleHeading({\n                    level: 2\n                  }).run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('heading', {\n                      level: 2\n                    }) ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"H2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleBulletList().run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('bulletList') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"\\u2022 List\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 577,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleOrderedList().run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('orderedList') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"1. List\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().undo().run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc'\n                  },\n                  children: \"\\u21BA Undo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().redo().run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc'\n                  },\n                  children: \"\\u21BB Redo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 25\n              }, this), editor && /*#__PURE__*/_jsxDEV(EditorContent, {\n                editor: editor,\n                className: \"tiptap-editor\",\n                style: {\n                  border: '1px solid #ccc',\n                  borderRadius: '6px',\n                  minHeight: '150px',\n                  padding: '10px',\n                  marginBottom: '10px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  margin: '10px 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    fontSize: '0.9em',\n                    fontWeight: 'bold'\n                  },\n                  children: [\"\\uD83D\\uDCCE Attach files:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    multiple: true,\n                    onChange: e => {\n                      const newFiles = Array.from(e.target.files || []);\n                      setAttachments(thread.id, [...attachments, ...newFiles]);\n                    },\n                    style: {\n                      display: 'block',\n                      marginTop: '6px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 639,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexWrap: 'wrap',\n                    marginTop: '10px',\n                    gap: '10px'\n                  },\n                  children: attachments.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      border: '1px solid #ccc',\n                      borderRadius: '4px',\n                      padding: '4px 8px',\n                      background: '#f0f0f0',\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginRight: '5px'\n                      },\n                      children: \"\\uD83D\\uDCC4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 659,\n                      columnNumber: 31\n                    }, this), file.name, /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setAttachments(thread.id, attachments.filter((_, i) => i !== index)),\n                      style: {\n                        marginLeft: '8px',\n                        color: 'red',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        fontSize: '16px',\n                        fontWeight: 'bold'\n                      },\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 661,\n                      columnNumber: 31\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 651,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '10px',\n                  marginTop: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => sendReply(thread.id, thread.messages[0].from, thread.subject, false),\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#4caf50',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '1.2em'\n                    },\n                    children: \"\\u2709\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 695,\n                    columnNumber: 27\n                  }, this), \"Send Reply\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 681,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setPendingReplyMeta(thread.id, {\n                      threadId: thread.id,\n                      to: thread.messages[0].from,\n                      subject: thread.subject\n                    });\n                  },\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#2196f3',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '1.2em'\n                    },\n                    children: \"\\uD83D\\uDC41\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 718,\n                    columnNumber: 27\n                  }, this), \"Preview\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 698,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => sendReply(thread.id, thread.messages[0].from, thread.subject, true),\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#ff9800',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '1.2em'\n                    },\n                    children: \"\\uD83D\\uDCBE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 27\n                  }, this), \"Save Draft\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 721,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 19\n          }, this), threadState.showPreview && threadState.pendingReplyMeta && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'fixed',\n              top: 0,\n              left: 0,\n              width: '100%',\n              height: '100%',\n              backgroundColor: 'rgba(0,0,0,0.5)',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              zIndex: 1000\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: 'white',\n                border: '1px solid #ccc',\n                padding: '20px',\n                borderRadius: '10px',\n                boxShadow: '0 4px 8px rgba(0,0,0,0.2)',\n                width: '80%',\n                maxWidth: '800px',\n                maxHeight: '80vh',\n                overflow: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  borderBottom: '1px solid #eee',\n                  paddingBottom: '10px'\n                },\n                children: \"\\uD83D\\uDCE8 Preview Your Reply\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  margin: '15px 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginBottom: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"To:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 769,\n                    columnNumber: 62\n                  }, this), \" \", threadState.pendingReplyMeta.to]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 769,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginBottom: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Subject:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 770,\n                    columnNumber: 62\n                  }, this), \" \", threadState.pendingReplyMeta.subject]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 770,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: '15px',\n                  border: '1px solid #eee',\n                  borderRadius: '6px',\n                  backgroundColor: '#fafafa'\n                },\n                dangerouslySetInnerHTML: {\n                  __html: editor ? editor.getHTML() : ''\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 23\n              }, this), attachments.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 'bold',\n                    marginBottom: '5px'\n                  },\n                  children: \"Attachments:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 781,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexWrap: 'wrap',\n                    gap: '10px'\n                  },\n                  children: attachments.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      padding: '5px 10px',\n                      backgroundColor: '#f0f0f0',\n                      borderRadius: '4px',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '5px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      role: \"img\",\n                      \"aria-label\": \"file\",\n                      children: \"\\uD83D\\uDCC4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 792,\n                      columnNumber: 33\n                    }, this), \" \", file.name]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 784,\n                    columnNumber: 31\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 782,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '15px',\n                  display: 'flex',\n                  justifyContent: 'flex-end',\n                  gap: '10px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setShowPreview(thread.id, false),\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#e0e0e0',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer'\n                  },\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 800,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    sendReply(threadState.pendingReplyMeta.threadId, threadState.pendingReplyMeta.to, threadState.pendingReplyMeta.subject, false);\n                    setShowPreview(thread.id, false);\n                  },\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#4caf50',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer'\n                  },\n                  children: \"Send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 799,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 744,\n            columnNumber: 19\n          }, this)]\n        }, thread.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '40px',\n        backgroundColor: '#f5f5f5',\n        borderRadius: '10px',\n        border: '1px dashed #ccc'\n      },\n      children: followEmails.length > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDCE8 Loading emails...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 845,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uD83D\\uDCED No emails to show. Add an email address to follow above.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 847,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 837,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 262,\n    columnNumber: 5\n  }, this);\n}\n_s3(EmailList, \"MDAylthpXmLbLQfkLuAoRg349RI=\");\n_c = EmailList;\nvar _c;\n$RefreshReg$(_c, \"EmailList\");","map":{"version":3,"names":["useEffect","useState","axios","useEditor","EditorContent","StarterKit","jsxDEV","_jsxDEV","cleanBody","html","replace","trim","getDateLabel","dateStr","date","Date","today","yesterday","setDate","getDate","toDateString","toLocaleDateString","undefined","year","month","day","weekday","useCreateEditor","_s","extensions","editorProps","handleKeyDown","view","event","key","preventDefault","dispatch","state","tr","insertText","content","EmailList","token","_s3","profile","setProfile","threads","setThreads","search","setSearch","userEmail","setUserEmail","followEmails","setFollowEmails","emailInput","setEmailInput","threadStates","setThreadStates","viewMode","setViewMode","editors","setEditors","initialStates","forEach","thread","id","expanded","threadSearch","showPreview","pendingReplyMeta","attachments","editor","Object","keys","length","prev","fetchEmails","res","post","senders","headers","withCredentials","data","error","_error$response","console","response","message","handleAddEmail","includes","fetchProfile","get","email","err","toggleThread","threadId","_s2","$RefreshSig$","updatedState","getInitials","from","name","split","map","word","join","slice","toUpperCase","appendLocalReply","t","messages","sendReply","to","subject","isDraft","_threadStates$threadI","getHTML","draft","toISOString","body","alert","commands","setContent","setThreadSearch","value","setAttachments","newAttachments","setPendingReplyMeta","meta","setShowPreview","filteredThreads","filter","_thread$subject","_thread$messages","toLowerCase","some","msg","_msg$from","_msg$body","className","style","padding","fontFamily","children","display","alignItems","marginBottom","backgroundColor","borderRadius","src","picture","alt","width","height","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","color","type","placeholder","onChange","e","target","border","gap","flex","onClick","cursor","justifyContent","fontWeight","flexWrap","marginTop","index","_","i","marginLeft","background","gridTemplateColumns","threadState","filteredMsgs","lastDateLabel","boxShadow","borderTop","flexDirection","margin","transform","transition","toLocaleString","maxHeight","overflowY","paddingRight","dateLabel","showDateLabel","isMe","textAlign","alignSelf","maxWidth","dangerouslySetInnerHTML","__html","chain","focus","toggleBold","run","isActive","title","toggleItalic","fontStyle","toggleStrike","textDecoration","setParagraph","toggleHeading","level","toggleBulletList","toggleOrderedList","undo","redo","minHeight","multiple","newFiles","Array","files","file","position","top","left","zIndex","overflow","borderBottom","paddingBottom","role","_c","$RefreshReg$"],"sources":["D:/MailChat/ChatMail/frontend/src/components/EmailList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport './EmailList.css';\r\n\r\nfunction cleanBody(html) {\r\n  if (!html || typeof html !== 'string') return '';\r\n  return html\r\n    .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '')\r\n    .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '')\r\n    .replace(/<\\/?(html|head|body|meta|title|link)[^>]*>/gi, '')\r\n    .replace(/<div[^>]+class=\"gmail_quote\"[^>]*>[\\s\\S]*$/gi, '')\r\n    .replace(/<blockquote[^>]*>[\\s\\S]*?<\\/blockquote>/gi, '')\r\n    .replace(/&nbsp;/g, ' ')\r\n    .replace(/\\s{2,}/g, ' ')\r\n    .trim();\r\n}\r\n\r\nfunction getDateLabel(dateStr) {\r\n  const date = new Date(dateStr);\r\n  const today = new Date();\r\n  const yesterday = new Date();\r\n  yesterday.setDate(today.getDate() - 1);\r\n\r\n  if (date.toDateString() === today.toDateString()) return 'Today';\r\n  if (date.toDateString() === yesterday.toDateString()) return 'Yesterday';\r\n  return date.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric', weekday: 'long' });\r\n}\r\n\r\n// Simple editor factory function to create multiple editors\r\nfunction useCreateEditor() {\r\n  return useEditor({\r\n    extensions: [StarterKit],\r\n    editorProps: {\r\n      handleKeyDown(view, event) {\r\n        if (event.key === 'Tab') {\r\n          event.preventDefault();\r\n          view.dispatch(\r\n            view.state.tr.insertText('    ') // inserts 4 spaces as indent\r\n          );\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n    },\r\n    content: '',\r\n  });\r\n}\r\n\r\nexport default function EmailList({ token }) {\r\n  const [profile, setProfile] = useState(null);\r\n  const [threads, setThreads] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [followEmails, setFollowEmails] = useState([]);\r\n  const [emailInput, setEmailInput] = useState('');\r\n  const [threadStates, setThreadStates] = useState({});\r\n  const [viewMode, setViewMode] = useState('grid'); // 'grid' or 'list'\r\n  const [editors, setEditors] = useState({});\r\n\r\n  // Initialize thread states when threads change\r\n  useEffect(() => {\r\n    const initialStates = {};\r\n    threads.forEach(thread => {\r\n      if (!threadStates[thread.id]) {\r\n        initialStates[thread.id] = {\r\n          expanded: false,\r\n          threadSearch: '',\r\n          showPreview: false,\r\n          pendingReplyMeta: null,\r\n          attachments: [],\r\n          editor: null // Will be set when expanded\r\n        };\r\n      }\r\n    });\r\n    \r\n    if (Object.keys(initialStates).length > 0) {\r\n      setThreadStates(prev => ({...prev, ...initialStates}));\r\n    }\r\n  }, [threads]);\r\n\r\n  useEffect(() => {\r\n    const fetchEmails = async () => {\r\n      try {\r\n        const res = await axios.post('http://localhost:5000/api/emails/followed', {\r\n          senders: followEmails,\r\n        }, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          withCredentials: true,\r\n        });\r\n        setThreads(res.data);\r\n      } catch (error) {\r\n        console.error('❌ Email fetch failed:', error.response?.data || error.message);\r\n      }\r\n    };\r\n\r\n    if (followEmails.length > 0) {\r\n      fetchEmails();\r\n    }\r\n  }, [followEmails, token]);\r\n  \r\n  const handleAddEmail = () => {\r\n    if (emailInput && !followEmails.includes(emailInput)) {\r\n      setFollowEmails((prev) => [...prev, emailInput]);\r\n      setEmailInput('');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/profile', {\r\n          withCredentials: true,\r\n        });\r\n        setProfile(res.data);\r\n        setUserEmail(res.data.email);\r\n      } catch (err) {\r\n        console.error('❌ Failed to load profile:', err.message);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n  \r\n  const toggleThread = (threadId) => {\r\n    setThreadStates(prev => {\r\n      const updatedState = {...prev};\r\n      \r\n      // If we're expanding a thread and no editor exists, create one\r\n      if (!updatedState[threadId].expanded && !updatedState[threadId].editor) {\r\n        updatedState[threadId].editor = useCreateEditor();\r\n      }\r\n      \r\n      updatedState[threadId] = {\r\n        ...updatedState[threadId],\r\n        expanded: !updatedState[threadId].expanded,\r\n        threadSearch: '',\r\n      };\r\n      \r\n      return updatedState;\r\n    });\r\n  };\r\n\r\n  const getInitials = (from) => {\r\n    const name = from.split('<')[0].trim();\r\n    return name.split(' ').map(word => word[0]).join('').slice(0, 2).toUpperCase();\r\n  };\r\n  \r\n  const appendLocalReply = (threadId, message) => {\r\n    setThreads((prev) =>\r\n      prev.map((t) => {\r\n        if (t.id !== threadId) return t;\r\n        return {\r\n          ...t,\r\n          messages: [...t.messages, message],\r\n        };\r\n      })\r\n    );\r\n  };\r\n\r\n  const sendReply = async (threadId, to, subject, isDraft) => {\r\n    const editor = threadStates[threadId]?.editor;\r\n    if (!editor) return;\r\n    \r\n    const html = editor.getHTML();\r\n    \r\n    try {\r\n      await axios.post('http://localhost:5000/api/reply', {\r\n        threadId,\r\n        to,\r\n        subject,\r\n        message: html,\r\n        draft: isDraft\r\n      }, { withCredentials: true });\r\n\r\n      appendLocalReply(threadId, {\r\n        from: userEmail,\r\n        subject,\r\n        date: new Date().toISOString(),\r\n        body: html,\r\n      });\r\n\r\n      if (isDraft) {\r\n        alert('✅ Draft saved!');\r\n      } else {\r\n        alert('✅ Reply sent!');\r\n      }\r\n\r\n      editor.commands.setContent('');\r\n      \r\n      // Reset thread state\r\n      setThreadStates(prev => ({\r\n        ...prev,\r\n        [threadId]: {\r\n          ...prev[threadId],\r\n          showPreview: false,\r\n          pendingReplyMeta: null,\r\n          attachments: []\r\n        }\r\n      }));\r\n      \r\n    } catch (err) {\r\n      console.error('❌ Reply failed:', err);\r\n      alert('Failed to send reply.');\r\n    }\r\n  };\r\n  \r\n  const setThreadSearch = (threadId, value) => {\r\n    setThreadStates(prev => ({\r\n      ...prev,\r\n      [threadId]: {\r\n        ...prev[threadId],\r\n        threadSearch: value\r\n      }\r\n    }));\r\n  };\r\n  \r\n  const setAttachments = (threadId, newAttachments) => {\r\n    setThreadStates(prev => ({\r\n      ...prev,\r\n      [threadId]: {\r\n        ...prev[threadId],\r\n        attachments: newAttachments\r\n      }\r\n    }));\r\n  };\r\n  \r\n  const setPendingReplyMeta = (threadId, meta) => {\r\n    setThreadStates(prev => ({\r\n      ...prev,\r\n      [threadId]: {\r\n        ...prev[threadId],\r\n        pendingReplyMeta: meta,\r\n        showPreview: true\r\n      }\r\n    }));\r\n  };\r\n  \r\n  const setShowPreview = (threadId, value) => {\r\n    setThreadStates(prev => ({\r\n      ...prev,\r\n      [threadId]: {\r\n        ...prev[threadId],\r\n        showPreview: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const filteredThreads = threads\r\n    .filter((thread) =>\r\n      thread.subject?.toLowerCase().includes(search.toLowerCase()) ||\r\n      thread.messages?.some(msg =>\r\n        msg.from?.toLowerCase().includes(search.toLowerCase()) ||\r\n        msg.body?.toLowerCase().includes(search.toLowerCase())\r\n      )\r\n    );\r\n\r\n  return (\r\n    <div className=\"email-list\" style={{ padding: '20px', fontFamily: 'Arial, sans-serif' }}>\r\n      {profile && (\r\n        <div style={{\r\n          display: 'flex', alignItems: 'center', marginBottom: '20px', padding: '10px',\r\n          backgroundColor: '#f0f0f0', borderRadius: '8px'\r\n        }}>\r\n          <img src={profile.picture} alt=\"avatar\" style={{ borderRadius: '50%', width: 40, height: 40, marginRight: 12 }} />\r\n          <div>\r\n            <div><strong>{profile.name}</strong></div>\r\n            <div style={{ fontSize: '0.9em', color: '#666' }}>{profile.email}</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"🔍 Search all threads...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          style={{ padding: '10px', width: '100%', marginBottom: '10px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n        />\r\n\r\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '10px' }}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Add email to follow...\"\r\n            value={emailInput}\r\n            onChange={(e) => setEmailInput(e.target.value)}\r\n            style={{ padding: '10px', flex: 1, borderRadius: '8px', border: '1px solid #ccc' }}\r\n          />\r\n          <button\r\n            onClick={handleAddEmail}\r\n            style={{ padding: '10px', backgroundColor: '#2196f3', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer' }}\r\n          >\r\n            Add Email\r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n          <div style={{ fontWeight: 'bold' }}>\r\n            {followEmails.length > 0 ? `Following ${followEmails.length} email${followEmails.length > 1 ? 's' : ''}` : 'No emails followed yet'}\r\n          </div>\r\n          <div style={{ display: 'flex', gap: '10px' }}>\r\n            <button \r\n              onClick={() => setViewMode('grid')}\r\n              style={{ \r\n                padding: '5px 10px', \r\n                backgroundColor: viewMode === 'grid' ? '#2196f3' : '#e0e0e0',\r\n                color: viewMode === 'grid' ? 'white' : 'black',\r\n                border: 'none', \r\n                borderRadius: '4px', \r\n                cursor: 'pointer' \r\n              }}\r\n            >\r\n              Grid View\r\n            </button>\r\n            <button \r\n              onClick={() => setViewMode('list')}\r\n              style={{ \r\n                padding: '5px 10px', \r\n                backgroundColor: viewMode === 'list' ? '#2196f3' : '#e0e0e0',\r\n                color: viewMode === 'list' ? 'white' : 'black',\r\n                border: 'none', \r\n                borderRadius: '4px', \r\n                cursor: 'pointer' \r\n              }}\r\n            >\r\n              List View\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px', marginTop: '10px' }}>\r\n          {followEmails.map((email, index) => (\r\n            <div key={index} style={{ \r\n              display: 'flex', \r\n              alignItems: 'center', \r\n              backgroundColor: '#e3f2fd', \r\n              borderRadius: '20px', \r\n              padding: '5px 10px',\r\n              border: '1px solid #bbdefb'\r\n            }}>\r\n              <span>{email}</span>\r\n              <button \r\n                onClick={() => setFollowEmails(prev => prev.filter((_, i) => i !== index))}\r\n                style={{ \r\n                  marginLeft: '5px', \r\n                  background: 'none', \r\n                  border: 'none', \r\n                  cursor: 'pointer',\r\n                  color: '#f44336',\r\n                  fontWeight: 'bold',\r\n                  fontSize: '16px'\r\n                }}\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {filteredThreads.length > 0 ? (\r\n        <div style={viewMode === 'grid' ? { \r\n          display: 'grid', \r\n          gridTemplateColumns: 'repeat(auto-fill, minmax(350px, 1fr))', \r\n          gap: '20px'\r\n        } : {}}>\r\n          {filteredThreads.map((thread) => {\r\n            const threadState = threadStates[thread.id] || { \r\n              expanded: false, \r\n              threadSearch: '', \r\n              showPreview: false,\r\n              pendingReplyMeta: null,\r\n              attachments: [],\r\n              editor: null\r\n            };\r\n            \r\n            const expanded = threadState.expanded;\r\n            const threadSearch = threadState.threadSearch || '';\r\n            const attachments = threadState.attachments || [];\r\n            const editor = threadState.editor;\r\n            \r\n            const filteredMsgs = thread.messages.filter(msg =>\r\n              msg.from.toLowerCase().includes(threadSearch.toLowerCase()) ||\r\n              msg.body.toLowerCase().includes(threadSearch.toLowerCase())\r\n            );\r\n\r\n            let lastDateLabel = '';\r\n\r\n            return (\r\n              <div key={thread.id} className={`email-thread ${expanded ? 'expanded' : ''}`} style={{\r\n                border: '2px solid #ccc', \r\n                borderRadius: '10px', \r\n                padding: '15px', \r\n                marginBottom: viewMode === 'list' ? '25px' : '0',\r\n                backgroundColor: '#fafafa', \r\n                boxShadow: '0 2px 6px rgba(0,0,0,0.05)',\r\n                borderTop: '5px solid #2196f3', // Visual accent\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n              }}>\r\n                <div style={{ \r\n                  display: 'flex', \r\n                  justifyContent: 'space-between', \r\n                  alignItems: 'center',\r\n                  cursor: 'pointer'\r\n                }} onClick={() => toggleThread(thread.id)}>\r\n                  <h3 style={{ margin: '0 0 5px 0', color: '#333', flex: 1 }}>\r\n                    📬 {thread.subject || '(no subject)'}\r\n                  </h3>\r\n                  <span style={{ \r\n                    transform: expanded ? 'rotate(180deg)' : 'rotate(0)', \r\n                    transition: 'transform 0.3s',\r\n                    fontSize: '1.2em'\r\n                  }}>▼</span>\r\n                </div>\r\n                \r\n                <div style={{ fontSize: '0.85em', color: '#666', marginBottom: '10px' }}>\r\n                  {thread.messages.length} message{thread.messages.length !== 1 ? 's' : ''} • \r\n                  Last activity: {new Date(thread.messages[thread.messages.length - 1].date).toLocaleString()}\r\n                </div>\r\n\r\n                {expanded && (\r\n                  <div style={{ marginTop: '15px' }}>\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search in this thread...\"\r\n                      value={threadSearch}\r\n                      onChange={(e) => setThreadSearch(thread.id, e.target.value)}\r\n                      style={{ padding: '8px', width: '100%', marginBottom: '15px', borderRadius: '6px', border: '1px solid #aaa' }}\r\n                    />\r\n\r\n                    <div style={{ \r\n                      maxHeight: '400px', \r\n                      overflowY: 'auto', \r\n                      paddingRight: '10px',\r\n                      border: '1px solid #e0e0e0',\r\n                      borderRadius: '8px',\r\n                      padding: '10px',\r\n                      backgroundColor: '#f5f5f5'\r\n                    }}>\r\n                      {filteredMsgs.map((msg, i) => {\r\n                        const dateLabel = getDateLabel(msg.date);\r\n                        const showDateLabel = dateLabel !== lastDateLabel;\r\n                        lastDateLabel = dateLabel;\r\n\r\n                        const isMe = msg.from.includes(userEmail);\r\n\r\n                        return (\r\n                          <div key={i} style={{ display: 'flex', flexDirection: 'column' }}>\r\n                            {showDateLabel && (\r\n                              <div style={{\r\n                                textAlign: 'center', margin: '15px 0 5px', color: '#666', fontSize: '0.85em', fontWeight: 'bold'\r\n                              }}>\r\n                                ── {dateLabel} ──\r\n                              </div>\r\n                            )}\r\n                            <div className={`message ${isMe ? 'sent' : 'received'}`} style={{\r\n                              display: 'flex', \r\n                              flexDirection: isMe ? 'row-reverse' : 'row', \r\n                              alignSelf: isMe ? 'flex-end' : 'flex-start',\r\n                              maxWidth: '75%', \r\n                              backgroundColor: isMe ? '#dcf8c6' : '#fff', \r\n                              padding: '10px', \r\n                              borderRadius: '10px',\r\n                              margin: '5px 0', \r\n                              border: isMe ? '1px solid #a2d5a2' : '1px solid #ccc',\r\n                              boxShadow: '0 1px 3px rgba(0,0,0,0.05)', \r\n                              textAlign: isMe ? 'right' : 'left'\r\n                            }}>\r\n                              <div className=\"avatar\" style={{\r\n                                backgroundColor: isMe ? '#4caf50' : '#888', \r\n                                color: '#fff', \r\n                                borderRadius: '50%',\r\n                                width: '36px', \r\n                                height: '36px', \r\n                                display: 'flex', \r\n                                alignItems: 'center', \r\n                                justifyContent: 'center',\r\n                                fontWeight: 'bold', \r\n                                fontSize: '0.9em', \r\n                                margin: isMe ? '0 0 0 10px' : '0 10px 0 0'\r\n                              }}>\r\n                                {isMe ? 'You' : getInitials(msg.from)}\r\n                              </div>\r\n                              <div style={{ flex: 1 }}>\r\n                                <div style={{ fontWeight: 'bold' }}>{isMe ? 'You' : msg.from}</div>\r\n                                <div className=\"email-body\" style={{ marginTop: '6px', marginBottom: '8px' }}\r\n                                  dangerouslySetInnerHTML={{ __html: cleanBody(msg.body) }} />\r\n                                <div style={{ fontSize: '0.8em', color: '#888' }}>{new Date(msg.date).toLocaleString()}</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n\r\n                    <div style={{ marginTop: '15px', border: '1px solid #e0e0e0', borderRadius: '8px', padding: '15px' }}>\r\n                      <h4 style={{ margin: '0 0 10px 0' }}>Reply</h4>\r\n                      {editor && (\r\n                        <div style={{ marginBottom: '8px', display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n                          <button\r\n                            onClick={() => editor.chain().focus().toggleBold().run()}\r\n                            className={editor.isActive('bold') ? 'active' : ''}\r\n                            title=\"Bold\"\r\n                            aria-label=\"Bold\"\r\n                            style={{ \r\n                              fontWeight: 'bold', \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('bold') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            B\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleItalic().run()} \r\n                            style={{ \r\n                              fontStyle: 'italic',\r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('italic') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            I\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleStrike().run()} \r\n                            style={{ \r\n                              textDecoration: 'line-through',\r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('strike') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            S\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().setParagraph().run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('paragraph') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            P\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('heading', { level: 1 }) ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            H1\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('heading', { level: 2 }) ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            H2\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('bulletList') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            • List\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleOrderedList().run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('orderedList') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >\r\n                            1. List\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().undo().run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc'\r\n                            }}\r\n                          >\r\n                            ↺ Undo\r\n                          </button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().redo().run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc'\r\n                            }}\r\n                          >\r\n                            ↻ Redo\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n\r\n                      {editor && (\r\n                        <EditorContent \r\n                          editor={editor} \r\n                          className=\"tiptap-editor\"\r\n                          style={{\r\n                            border: '1px solid #ccc',\r\n                            borderRadius: '6px',\r\n                            minHeight: '150px',\r\n                            padding: '10px',\r\n                            marginBottom: '10px'\r\n                          }}\r\n                        />\r\n                      )}\r\n\r\n                      {/* Multi Attachment Upload */}\r\n                      <div style={{ margin: '10px 0' }}>\r\n                        <label style={{ fontSize: '0.9em', fontWeight: 'bold' }}>📎 Attach files:\r\n                          <input \r\n                            type=\"file\" \r\n                            multiple\r\n                            onChange={(e) => {\r\n                              const newFiles = Array.from(e.target.files || []);\r\n                              setAttachments(thread.id, [...attachments, ...newFiles]);\r\n                            }} \r\n                            style={{ display: 'block', marginTop: '6px' }} \r\n                          />\r\n                        </label>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap', marginTop: '10px', gap: '10px' }}>\r\n                          {attachments.map((file, index) => (\r\n                            <div key={index} style={{ \r\n                              border: '1px solid #ccc', \r\n                              borderRadius: '4px', \r\n                              padding: '4px 8px', \r\n                              background: '#f0f0f0',\r\n                              display: 'flex',\r\n                              alignItems: 'center'\r\n                            }}>\r\n                              <span style={{ marginRight: '5px' }}>📄</span>\r\n                              {file.name}\r\n                              <button \r\n                                onClick={() => setAttachments(thread.id, attachments.filter((_, i) => i !== index))} \r\n                                style={{ \r\n                                  marginLeft: '8px', \r\n                                  color: 'red', \r\n                                  background: 'none', \r\n                                  border: 'none', \r\n                                  cursor: 'pointer',\r\n                                  fontSize: '16px',\r\n                                  fontWeight: 'bold'\r\n                                }}\r\n                              >\r\n                                ×\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div style={{ display: 'flex', gap: '10px', marginTop: '15px' }}>\r\n                        <button\r\n                          onClick={() => sendReply(thread.id, thread.messages[0].from, thread.subject, false)}\r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#4caf50', \r\n                            color: '#fff', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '5px'\r\n                          }}\r\n                        >\r\n                          <span style={{ fontSize: '1.2em' }}>✉️</span>\r\n                          Send Reply\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setPendingReplyMeta(thread.id, {\r\n                              threadId: thread.id,\r\n                              to: thread.messages[0].from,\r\n                              subject: thread.subject,\r\n                            });\r\n                          }}\r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#2196f3', \r\n                            color: '#fff', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '5px'\r\n                          }}\r\n                        >\r\n                          <span style={{ fontSize: '1.2em' }}>👁️</span>\r\n                          Preview\r\n                        </button>\r\n                        <button\r\n                          onClick={() => sendReply(thread.id, thread.messages[0].from, thread.subject, true)}\r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#ff9800', \r\n                            color: '#fff', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '5px'\r\n                          }}\r\n                        >\r\n                          <span style={{ fontSize: '1.2em' }}>💾</span>\r\n                          Save Draft\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {threadState.showPreview && threadState.pendingReplyMeta && (\r\n                  <div style={{ \r\n                    position: 'fixed', \r\n                    top: 0, \r\n                    left: 0, \r\n                    width: '100%', \r\n                    height: '100%', \r\n                    backgroundColor: 'rgba(0,0,0,0.5)',\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    zIndex: 1000\r\n                  }}>\r\n                    <div style={{ \r\n                      backgroundColor: 'white', \r\n                      border: '1px solid #ccc',\r\n                      padding: '20px', \r\n                      borderRadius: '10px', \r\n                      boxShadow: '0 4px 8px rgba(0,0,0,0.2)',\r\n                      width: '80%',\r\n                      maxWidth: '800px',\r\n                      maxHeight: '80vh',\r\n                      overflow: 'auto'\r\n                    }}>\r\n                      <h3 style={{ borderBottom: '1px solid #eee', paddingBottom: '10px' }}>📨 Preview Your Reply</h3>\r\n                      <div style={{ margin: '15px 0' }}>\r\n                        <div style={{ marginBottom: '5px' }}><strong>To:</strong> {threadState.pendingReplyMeta.to}</div>\r\n                        <div style={{ marginBottom: '5px' }}><strong>Subject:</strong> {threadState.pendingReplyMeta.subject}</div>\r\n                      </div>\r\n                      <div style={{ \r\n                        padding: '15px', \r\n                        border: '1px solid #eee',\r\n                        borderRadius: '6px',\r\n                        backgroundColor: '#fafafa' \r\n                      }} dangerouslySetInnerHTML={{ __html: editor ? editor.getHTML() : '' }} />\r\n                      \r\n                      {attachments.length > 0 && (\r\n                        <div style={{ marginTop: '15px' }}>\r\n                          <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>Attachments:</div>\r\n                          <div style={{ display: 'flex', flexWrap: 'wrap', gap: '10px' }}>\r\n                            {attachments.map((file, index) => (\r\n                              <div key={index} style={{ \r\n                                padding: '5px 10px', \r\n                                backgroundColor: '#f0f0f0', \r\n                                borderRadius: '4px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '5px'\r\n                              }}>\r\n                                <span role=\"img\" aria-label=\"file\">📄</span> {file.name}\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div style={{ marginTop: '15px', display: 'flex', justifyContent: 'flex-end', gap: '10px' }}>\r\n                        <button \r\n                          onClick={() => setShowPreview(thread.id, false)} \r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#e0e0e0', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer' \r\n                          }}\r\n                        >\r\n                          Cancel\r\n                        </button>\r\n                        <button \r\n                          onClick={() => {\r\n                            sendReply(threadState.pendingReplyMeta.threadId, threadState.pendingReplyMeta.to, threadState.pendingReplyMeta.subject, false);\r\n                            setShowPreview(thread.id, false);\r\n                          }} \r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#4caf50', \r\n                            color: 'white', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer' \r\n                          }}\r\n                        >\r\n                          Send\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div style={{ \r\n          textAlign: 'center', \r\n          padding: '40px', \r\n          backgroundColor: '#f5f5f5', \r\n          borderRadius: '10px',\r\n          border: '1px dashed #ccc'\r\n        }}>\r\n          {followEmails.length > 0 ? (\r\n            <p>📨 Loading emails...</p>\r\n          ) : (\r\n            <p>📭 No emails to show. Add an email address to follow above.</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}