{"ast":null,"code":"import{useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Callback(_ref){let{onLogin}=_ref;const navigate=useNavigate();useEffect(()=>{const handleOAuthRedirect=async()=>{const params=new URLSearchParams(window.location.search);const code=params.get('code');if(!code)return;try{const res=await axios.get(`http://localhost:5000/api/oauth2callback?code=${code}`);const{tokens}=res.data;// Save token and notify parent component\nlocalStorage.setItem('accessToken',tokens.access_token);onLogin({accessToken:tokens.access_token});// or full user data if you have it\nnavigate('/');// go back to homepage\n}catch(error){console.error(\"OAuth callback error:\",error);}};handleOAuthRedirect();},[navigate,onLogin]);return/*#__PURE__*/_jsx(\"p\",{children:\"Logging you in...\"});}","map":{"version":3,"names":["useEffect","axios","useNavigate","jsx","_jsx","Callback","_ref","onLogin","navigate","handleOAuthRedirect","params","URLSearchParams","window","location","search","code","get","res","tokens","data","localStorage","setItem","access_token","accessToken","error","console","children"],"sources":["C:/MailChat/frontend/src/components/Callback.jsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Callback({ onLogin }) {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const handleOAuthRedirect = async () => {\r\n      const params = new URLSearchParams(window.location.search);\r\n      const code = params.get('code');\r\n      if (!code) return;\r\n\r\n      try {\r\n        const res = await axios.get(`http://localhost:5000/api/oauth2callback?code=${code}`);\r\n        const { tokens } = res.data;\r\n\r\n        // Save token and notify parent component\r\n        localStorage.setItem('accessToken', tokens.access_token);\r\n        onLogin({ accessToken: tokens.access_token }); // or full user data if you have it\r\n\r\n        navigate('/'); // go back to homepage\r\n      } catch (error) {\r\n        console.error(\"OAuth callback error:\", error);\r\n      }\r\n    };\r\n\r\n    handleOAuthRedirect();\r\n  }, [navigate, onLogin]);\r\n\r\n  return <p>Logging you in...</p>;\r\n}\r\n"],"mappings":"AAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/C,cAAe,SAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAc,IAAb,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CAC1C,KAAM,CAAAE,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAS,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,KAAM,CAAAC,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAC1D,KAAM,CAAAC,IAAI,CAAGL,MAAM,CAACM,GAAG,CAAC,MAAM,CAAC,CAC/B,GAAI,CAACD,IAAI,CAAE,OAEX,GAAI,CACF,KAAM,CAAAE,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAACe,GAAG,CAAC,iDAAiDD,IAAI,EAAE,CAAC,CACpF,KAAM,CAAEG,MAAO,CAAC,CAAGD,GAAG,CAACE,IAAI,CAE3B;AACAC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAEH,MAAM,CAACI,YAAY,CAAC,CACxDf,OAAO,CAAC,CAAEgB,WAAW,CAAEL,MAAM,CAACI,YAAa,CAAC,CAAC,CAAE;AAE/Cd,QAAQ,CAAC,GAAG,CAAC,CAAE;AACjB,CAAE,MAAOgB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CACF,CAAC,CAEDf,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,CAACD,QAAQ,CAAED,OAAO,CAAC,CAAC,CAEvB,mBAAOH,IAAA,MAAAsB,QAAA,CAAG,mBAAiB,CAAG,CAAC,CACjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}