{"ast":null,"code":"var _jsxFileName = \"D:\\\\MailChat\\\\ChatMail\\\\frontend\\\\src\\\\components\\\\EmailList.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useEditor, EditorContent } from '@tiptap/react';\nimport StarterKit from '@tiptap/starter-kit';\nimport './EmailList.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction cleanBody(html) {\n  if (!html || typeof html !== 'string') return '';\n  return html.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '').replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '').replace(/<\\/?(html|head|body|meta|title|link)[^>]*>/gi, '').replace(/<div[^>]+class=\"gmail_quote\"[^>]*>[\\s\\S]*$/gi, '').replace(/<blockquote[^>]*>[\\s\\S]*?<\\/blockquote>/gi, '').replace(/&nbsp;/g, ' ').replace(/\\s{2,}/g, ' ').trim();\n}\nfunction getDateLabel(dateStr) {\n  const date = new Date(dateStr);\n  const today = new Date();\n  const yesterday = new Date();\n  yesterday.setDate(today.getDate() - 1);\n  if (date.toDateString() === today.toDateString()) return 'Today';\n  if (date.toDateString() === yesterday.toDateString()) return 'Yesterday';\n  return date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    weekday: 'long'\n  });\n}\n\n// Simple editor factory function to create multiple editors\nfunction createEditor() {\n  _s();\n  return useEditor({\n    extensions: [StarterKit],\n    editorProps: {\n      handleKeyDown(view, event) {\n        if (event.key === 'Tab') {\n          event.preventDefault();\n          view.dispatch(view.state.tr.insertText('    ') // inserts 4 spaces as indent\n          );\n          return true;\n        }\n        return false;\n      }\n    },\n    content: ''\n  });\n}\n_s(createEditor, \"Y0m68CG3DQ+w7nDf2INtvOkmtxE=\", false, function () {\n  return [useEditor];\n});\nexport default function EmailThreadManager({\n  token\n}) {\n  _s2();\n  const [profile, setProfile] = useState(null);\n  const [threads, setThreads] = useState([]);\n  const [search, setSearch] = useState('');\n  const [userEmail, setUserEmail] = useState('');\n  const [followEmails, setFollowEmails] = useState([]);\n  const [emailInput, setEmailInput] = useState('');\n  const [selectedThread, setSelectedThread] = useState(null);\n  const [activeEmail, setActiveEmail] = useState(null);\n  const [editors, setEditors] = useState({});\n  const [attachments, setAttachments] = useState({});\n  const [showEmailPanel, setShowEmailPanel] = useState(false);\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const res = await axios.get('http://localhost:5000/api/profile', {\n          withCredentials: true\n        });\n        setProfile(res.data);\n        setUserEmail(res.data.email);\n      } catch (err) {\n        console.error('❌ Failed to load profile:', err.message);\n      }\n    };\n    fetchProfile();\n  }, []);\n  useEffect(() => {\n    const fetchEmails = async () => {\n      try {\n        const res = await axios.post('http://localhost:5000/api/emails/followed', {\n          senders: followEmails\n        }, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          },\n          withCredentials: true\n        });\n        setThreads(res.data);\n      } catch (error) {\n        var _error$response;\n        console.error('❌ Email fetch failed:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      }\n    };\n    if (followEmails.length > 0) {\n      fetchEmails();\n    }\n  }, [followEmails, token]);\n  const handleAddEmail = () => {\n    if (emailInput && !followEmails.includes(emailInput)) {\n      setFollowEmails(prev => [...prev, emailInput]);\n      setEmailInput('');\n    }\n  };\n  const selectThread = threadId => {\n    if (selectedThread === threadId) {\n      setSelectedThread(null);\n    } else {\n      setSelectedThread(threadId);\n\n      // Create editor for this thread if it doesn't exist\n      if (!editors[threadId]) {\n        const newEditor = createEditor();\n        setEditors(prev => ({\n          ...prev,\n          [threadId]: newEditor\n        }));\n      }\n\n      // Initialize attachments if needed\n      if (!attachments[threadId]) {\n        setAttachments(prev => ({\n          ...prev,\n          [threadId]: []\n        }));\n      }\n    }\n  };\n  const selectEmailSender = email => {\n    setActiveEmail(email);\n    setShowEmailPanel(true);\n  };\n  const getInitials = from => {\n    const name = from.split('<')[0].trim();\n    return name.split(' ').map(word => word[0]).join('').slice(0, 2).toUpperCase();\n  };\n  const appendLocalReply = (threadId, message) => {\n    setThreads(prev => prev.map(t => {\n      if (t.id !== threadId) return t;\n      return {\n        ...t,\n        messages: [...t.messages, message]\n      };\n    }));\n  };\n  const sendReply = async (threadId, to, subject) => {\n    const editor = editors[threadId];\n    if (!editor) return;\n    const html = editor.getHTML();\n    const threadAttachments = attachments[threadId] || [];\n    try {\n      await axios.post('http://localhost:5000/api/reply', {\n        threadId,\n        to,\n        subject,\n        message: html,\n        draft: false\n      }, {\n        withCredentials: true\n      });\n      appendLocalReply(threadId, {\n        from: userEmail,\n        subject,\n        date: new Date().toISOString(),\n        body: html\n      });\n      alert('✅ Reply sent!');\n      editor.commands.setContent('');\n\n      // Clear attachments for this thread\n      setAttachments(prev => ({\n        ...prev,\n        [threadId]: []\n      }));\n    } catch (err) {\n      console.error('❌ Reply failed:', err);\n      alert('Failed to send reply.');\n    }\n  };\n  const saveDraft = async (threadId, to, subject) => {\n    const editor = editors[threadId];\n    if (!editor) return;\n    const html = editor.getHTML();\n    try {\n      await axios.post('http://localhost:5000/api/reply', {\n        threadId,\n        to,\n        subject,\n        message: html,\n        draft: true\n      }, {\n        withCredentials: true\n      });\n      alert('✅ Draft saved!');\n    } catch (err) {\n      console.error('❌ Draft save failed:', err);\n      alert('Failed to save draft.');\n    }\n  };\n  const handleFileAttachment = (threadId, files) => {\n    setAttachments(prev => ({\n      ...prev,\n      [threadId]: [...(prev[threadId] || []), ...Array.from(files)]\n    }));\n  };\n  const removeAttachment = (threadId, index) => {\n    setAttachments(prev => {\n      const newAttachments = [...prev[threadId]];\n      newAttachments.splice(index, 1);\n      return {\n        ...prev,\n        [threadId]: newAttachments\n      };\n    });\n  };\n\n  // Filter threads based on search and active email\n  const filteredThreads = threads.filter(thread => !activeEmail || thread.messages.some(msg => msg.from.includes(activeEmail))).filter(thread => {\n    var _thread$subject, _thread$messages;\n    return !search || ((_thread$subject = thread.subject) === null || _thread$subject === void 0 ? void 0 : _thread$subject.toLowerCase().includes(search.toLowerCase())) || ((_thread$messages = thread.messages) === null || _thread$messages === void 0 ? void 0 : _thread$messages.some(msg => {\n      var _msg$from, _msg$body;\n      return ((_msg$from = msg.from) === null || _msg$from === void 0 ? void 0 : _msg$from.toLowerCase().includes(search.toLowerCase())) || ((_msg$body = msg.body) === null || _msg$body === void 0 ? void 0 : _msg$body.toLowerCase().includes(search.toLowerCase()));\n    }));\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"email-thread-manager\",\n    style: {\n      padding: '20px',\n      fontFamily: 'Arial, sans-serif',\n      maxWidth: '1200px',\n      margin: '0 auto'\n    },\n    children: [profile && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        marginBottom: '20px',\n        padding: '10px',\n        backgroundColor: '#f0f0f0',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: profile.picture,\n        alt: \"avatar\",\n        style: {\n          borderRadius: '50%',\n          width: 40,\n          height: 40,\n          marginRight: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: profile.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.9em',\n            color: '#666'\n          },\n          children: profile.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uD83D\\uDD0D Search all threads...\",\n        value: search,\n        onChange: e => setSearch(e.target.value),\n        style: {\n          padding: '10px',\n          width: '100%',\n          marginBottom: '10px',\n          borderRadius: '8px',\n          border: '1px solid #ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px',\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Add email to follow...\",\n          value: emailInput,\n          onChange: e => setEmailInput(e.target.value),\n          style: {\n            padding: '10px',\n            flex: 1,\n            borderRadius: '8px',\n            border: '1px solid #ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAddEmail,\n          style: {\n            padding: '10px',\n            backgroundColor: '#2196f3',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer'\n          },\n          children: \"Add Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexWrap: 'wrap',\n          gap: '8px',\n          marginTop: '10px'\n        },\n        children: [followEmails.map((email, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => selectEmailSender(email),\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              backgroundColor: activeEmail === email ? '#2196f3' : '#e3f2fd',\n              color: activeEmail === email ? 'white' : 'black',\n              borderRadius: '20px',\n              padding: '8px 15px',\n              border: '1px solid #bbdefb',\n              cursor: 'pointer',\n              fontWeight: activeEmail === email ? 'bold' : 'normal'\n            },\n            children: [\"\\uD83D\\uDCE7 \", email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setFollowEmails(prev => prev.filter((_, i) => i !== index)),\n            style: {\n              marginLeft: '5px',\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              color: '#f44336',\n              fontWeight: 'bold',\n              fontSize: '16px'\n            },\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setActiveEmail(null);\n            setShowEmailPanel(true);\n          },\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            backgroundColor: activeEmail === null && showEmailPanel ? '#2196f3' : '#e0e0e0',\n            color: activeEmail === null && showEmailPanel ? 'white' : 'black',\n            borderRadius: '20px',\n            padding: '8px 15px',\n            border: 'none',\n            cursor: 'pointer',\n            fontWeight: activeEmail === null && showEmailPanel ? 'bold' : 'normal'\n          },\n          children: \"\\uD83D\\uDCE7 All Emails\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowEmailPanel(!showEmailPanel),\n          style: {\n            backgroundColor: showEmailPanel ? '#f44336' : '#4caf50',\n            color: 'white',\n            borderRadius: '20px',\n            padding: '8px 15px',\n            border: 'none',\n            cursor: 'pointer',\n            marginLeft: 'auto'\n          },\n          children: showEmailPanel ? '✕ Close Email Panel' : '✓ Open Email Panel'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }, this), showEmailPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '300px',\n          borderRight: '1px solid #e0e0e0',\n          padding: '0 15px 15px 0',\n          overflowY: 'auto',\n          maxHeight: '80vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"Email Threads \", activeEmail ? `from ${activeEmail}` : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this), filteredThreads.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '10px'\n          },\n          children: filteredThreads.map(thread => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => selectThread(thread.id),\n            style: {\n              padding: '10px',\n              borderRadius: '8px',\n              border: selectedThread === thread.id ? '2px solid #2196f3' : '1px solid #ddd',\n              backgroundColor: selectedThread === thread.id ? '#e3f2fd' : '#f5f5f5',\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 'bold',\n                marginBottom: '5px'\n              },\n              children: thread.subject || '(no subject)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8em',\n                color: '#666'\n              },\n              children: [\"From: \", thread.messages[0].from.split('<')[0].trim()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8em',\n                color: '#666'\n              },\n              children: [thread.messages.length, \" message\", thread.messages.length !== 1 ? 's' : '', \" \\u2022 Last activity: \", new Date(thread.messages[thread.messages.length - 1].date).toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 21\n            }, this)]\n          }, thread.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '20px',\n            color: '#666'\n          },\n          children: followEmails.length > 0 ? 'No matching threads found.' : 'Add an email address to follow.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: selectedThread ? (() => {\n          const thread = threads.find(t => t.id === selectedThread);\n          if (!thread) return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Thread not found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 37\n          }, this);\n          const editor = editors[selectedThread];\n          const threadAttachments = attachments[selectedThread] || [];\n          let lastDateLabel = '';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: '1px solid #e0e0e0',\n              borderRadius: '8px',\n              padding: '15px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                borderBottom: '1px solid #e0e0e0',\n                paddingBottom: '10px'\n              },\n              children: thread.subject || '(no subject)'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxHeight: '400px',\n                overflowY: 'auto',\n                padding: '10px',\n                marginBottom: '20px',\n                border: '1px solid #f0f0f0',\n                borderRadius: '8px'\n              },\n              children: thread.messages.map((msg, i) => {\n                const dateLabel = getDateLabel(msg.date);\n                const showDateLabel = dateLabel !== lastDateLabel;\n                lastDateLabel = dateLabel;\n                const isMe = msg.from.includes(userEmail);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexDirection: 'column',\n                    marginBottom: '15px'\n                  },\n                  children: [showDateLabel && /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: 'center',\n                      margin: '15px 0 5px',\n                      color: '#666',\n                      fontSize: '0.85em',\n                      fontWeight: 'bold'\n                    },\n                    children: [\"\\u2500\\u2500 \", dateLabel, \" \\u2500\\u2500\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 455,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      flexDirection: isMe ? 'row-reverse' : 'row',\n                      alignSelf: isMe ? 'flex-end' : 'flex-start',\n                      maxWidth: '75%',\n                      backgroundColor: isMe ? '#dcf8c6' : '#fff',\n                      padding: '10px',\n                      borderRadius: '10px',\n                      margin: '5px 0',\n                      border: isMe ? '1px solid #a2d5a2' : '1px solid #ccc',\n                      boxShadow: '0 1px 3px rgba(0,0,0,0.05)',\n                      textAlign: isMe ? 'right' : 'left'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        backgroundColor: isMe ? '#4caf50' : '#888',\n                        color: '#fff',\n                        borderRadius: '50%',\n                        width: '36px',\n                        height: '36px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontWeight: 'bold',\n                        fontSize: '0.9em',\n                        margin: isMe ? '0 0 0 10px' : '0 10px 0 0'\n                      },\n                      children: isMe ? 'You' : getInitials(msg.from)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 478,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        flex: 1\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontWeight: 'bold'\n                        },\n                        children: isMe ? 'You' : msg.from\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 494,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          marginTop: '6px',\n                          marginBottom: '8px'\n                        },\n                        dangerouslySetInnerHTML: {\n                          __html: cleanBody(msg.body)\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 495,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          fontSize: '0.8em',\n                          color: '#888'\n                        },\n                        children: new Date(msg.date).toLocaleString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 497,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 493,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 29\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 27\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: '1px solid #e0e0e0',\n                borderRadius: '8px',\n                padding: '15px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                style: {\n                  marginTop: 0\n                },\n                children: \"Reply\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 23\n              }, this), editor && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: '10px',\n                  display: 'flex',\n                  gap: '5px',\n                  flexWrap: 'wrap'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleBold().run(),\n                  style: {\n                    fontWeight: 'bold',\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('bold') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 514,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleItalic().run(),\n                  style: {\n                    fontStyle: 'italic',\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('italic') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"I\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 524,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editor.chain().focus().toggleBulletList().run(),\n                  style: {\n                    padding: '5px 10px',\n                    borderRadius: '4px',\n                    border: '1px solid #ccc',\n                    backgroundColor: editor.isActive('bulletList') ? '#e3f2fd' : '#fff'\n                  },\n                  children: \"\\u2022 List\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 25\n              }, this), editor && /*#__PURE__*/_jsxDEV(EditorContent, {\n                editor: editor,\n                className: \"tiptap-editor\",\n                style: {\n                  border: '1px solid #ccc',\n                  borderRadius: '6px',\n                  minHeight: '150px',\n                  padding: '10px',\n                  marginBottom: '10px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  margin: '10px 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  style: {\n                    fontSize: '0.9em',\n                    fontWeight: 'bold'\n                  },\n                  children: [\"\\uD83D\\uDCCE Attach files:\", /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    multiple: true,\n                    onChange: e => handleFileAttachment(selectedThread, e.target.files),\n                    style: {\n                      display: 'block',\n                      marginTop: '6px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexWrap: 'wrap',\n                    marginTop: '10px',\n                    gap: '10px'\n                  },\n                  children: threadAttachments.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      border: '1px solid #ccc',\n                      borderRadius: '4px',\n                      padding: '4px 8px',\n                      background: '#f0f0f0',\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginRight: '5px'\n                      },\n                      children: \"\\uD83D\\uDCC4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 579,\n                      columnNumber: 31\n                    }, this), file.name, /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => removeAttachment(selectedThread, index),\n                      style: {\n                        marginLeft: '8px',\n                        color: 'red',\n                        background: 'none',\n                        border: 'none',\n                        cursor: 'pointer',\n                        fontSize: '16px',\n                        fontWeight: 'bold'\n                      },\n                      children: \"\\xD7\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 581,\n                      columnNumber: 31\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 571,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: '10px',\n                  marginTop: '15px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => sendReply(selectedThread, thread.messages[0].from, thread.subject),\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#4caf50',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '1.2em'\n                    },\n                    children: \"\\u2709\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 27\n                  }, this), \"Send Reply\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 599,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => saveDraft(selectedThread, thread.messages[0].from, thread.subject),\n                  style: {\n                    padding: '8px 16px',\n                    backgroundColor: '#ff9800',\n                    color: '#fff',\n                    border: 'none',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '5px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      fontSize: '1.2em'\n                    },\n                    children: \"\\uD83D\\uDCBE\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 630,\n                    columnNumber: 27\n                  }, this), \"Save Draft\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 19\n          }, this);\n        })() : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '40px',\n            backgroundColor: '#f5f5f5',\n            borderRadius: '10px',\n            border: '1px dashed #ccc'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Select a thread to view\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Click on any email thread from the list to view its contents and reply.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 9\n    }, this), !showEmailPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '40px',\n        backgroundColor: '#f5f5f5',\n        borderRadius: '10px',\n        border: '1px dashed #ccc'\n      },\n      children: followEmails.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Email Interface\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Click the \\\"Open Email Panel\\\" button above to view and manage your emails.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"No Emails Configured\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Add an email address to follow above, then open the email panel.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 655,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n}\n_s2(EmailThreadManager, \"qDqWUInTq0TQIJwzoYoQzV9GgTM=\");\n_c = EmailThreadManager;\nvar _c;\n$RefreshReg$(_c, \"EmailThreadManager\");","map":{"version":3,"names":["useEffect","useState","axios","useEditor","EditorContent","StarterKit","jsxDEV","_jsxDEV","Fragment","_Fragment","cleanBody","html","replace","trim","getDateLabel","dateStr","date","Date","today","yesterday","setDate","getDate","toDateString","toLocaleDateString","undefined","year","month","day","weekday","createEditor","_s","extensions","editorProps","handleKeyDown","view","event","key","preventDefault","dispatch","state","tr","insertText","content","EmailThreadManager","token","_s2","profile","setProfile","threads","setThreads","search","setSearch","userEmail","setUserEmail","followEmails","setFollowEmails","emailInput","setEmailInput","selectedThread","setSelectedThread","activeEmail","setActiveEmail","editors","setEditors","attachments","setAttachments","showEmailPanel","setShowEmailPanel","fetchProfile","res","get","withCredentials","data","email","err","console","error","message","fetchEmails","post","senders","headers","_error$response","response","length","handleAddEmail","includes","prev","selectThread","threadId","newEditor","selectEmailSender","getInitials","from","name","split","map","word","join","slice","toUpperCase","appendLocalReply","t","id","messages","sendReply","to","subject","editor","getHTML","threadAttachments","draft","toISOString","body","alert","commands","setContent","saveDraft","handleFileAttachment","files","Array","removeAttachment","index","newAttachments","splice","filteredThreads","filter","thread","some","msg","_thread$subject","_thread$messages","toLowerCase","_msg$from","_msg$body","className","style","padding","fontFamily","maxWidth","margin","children","display","alignItems","marginBottom","backgroundColor","borderRadius","src","picture","alt","width","height","marginRight","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","color","type","placeholder","value","onChange","e","target","border","gap","flex","onClick","cursor","flexWrap","marginTop","fontWeight","_","i","marginLeft","background","borderRight","overflowY","maxHeight","flexDirection","toLocaleString","textAlign","find","lastDateLabel","borderBottom","paddingBottom","dateLabel","showDateLabel","isMe","alignSelf","boxShadow","justifyContent","dangerouslySetInnerHTML","__html","chain","focus","toggleBold","run","isActive","toggleItalic","fontStyle","toggleBulletList","minHeight","multiple","file","_c","$RefreshReg$"],"sources":["D:/MailChat/ChatMail/frontend/src/components/EmailList.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useEditor, EditorContent } from '@tiptap/react';\r\nimport StarterKit from '@tiptap/starter-kit';\r\nimport './EmailList.css';\r\n\r\nfunction cleanBody(html) {\r\n  if (!html || typeof html !== 'string') return '';\r\n  return html\r\n    .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '')\r\n    .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '')\r\n    .replace(/<\\/?(html|head|body|meta|title|link)[^>]*>/gi, '')\r\n    .replace(/<div[^>]+class=\"gmail_quote\"[^>]*>[\\s\\S]*$/gi, '')\r\n    .replace(/<blockquote[^>]*>[\\s\\S]*?<\\/blockquote>/gi, '')\r\n    .replace(/&nbsp;/g, ' ')\r\n    .replace(/\\s{2,}/g, ' ')\r\n    .trim();\r\n}\r\n\r\nfunction getDateLabel(dateStr) {\r\n  const date = new Date(dateStr);\r\n  const today = new Date();\r\n  const yesterday = new Date();\r\n  yesterday.setDate(today.getDate() - 1);\r\n\r\n  if (date.toDateString() === today.toDateString()) return 'Today';\r\n  if (date.toDateString() === yesterday.toDateString()) return 'Yesterday';\r\n  return date.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric', weekday: 'long' });\r\n}\r\n\r\n// Simple editor factory function to create multiple editors\r\nfunction createEditor() {\r\n  return useEditor({\r\n    extensions: [StarterKit],\r\n    editorProps: {\r\n      handleKeyDown(view, event) {\r\n        if (event.key === 'Tab') {\r\n          event.preventDefault();\r\n          view.dispatch(\r\n            view.state.tr.insertText('    ') // inserts 4 spaces as indent\r\n          );\r\n          return true;\r\n        }\r\n        return false;\r\n      }\r\n    },\r\n    content: '',\r\n  });\r\n}\r\n\r\nexport default function EmailThreadManager({ token }) {\r\n  const [profile, setProfile] = useState(null);\r\n  const [threads, setThreads] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [followEmails, setFollowEmails] = useState([]);\r\n  const [emailInput, setEmailInput] = useState('');\r\n  const [selectedThread, setSelectedThread] = useState(null);\r\n  const [activeEmail, setActiveEmail] = useState(null);\r\n  const [editors, setEditors] = useState({});\r\n  const [attachments, setAttachments] = useState({});\r\n  const [showEmailPanel, setShowEmailPanel] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/profile', {\r\n          withCredentials: true,\r\n        });\r\n        setProfile(res.data);\r\n        setUserEmail(res.data.email);\r\n      } catch (err) {\r\n        console.error('❌ Failed to load profile:', err.message);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const fetchEmails = async () => {\r\n      try {\r\n        const res = await axios.post('http://localhost:5000/api/emails/followed', {\r\n          senders: followEmails,\r\n        }, {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          },\r\n          withCredentials: true,\r\n        });\r\n        setThreads(res.data);\r\n      } catch (error) {\r\n        console.error('❌ Email fetch failed:', error.response?.data || error.message);\r\n      }\r\n    };\r\n\r\n    if (followEmails.length > 0) {\r\n      fetchEmails();\r\n    }\r\n  }, [followEmails, token]);\r\n  \r\n  const handleAddEmail = () => {\r\n    if (emailInput && !followEmails.includes(emailInput)) {\r\n      setFollowEmails((prev) => [...prev, emailInput]);\r\n      setEmailInput('');\r\n    }\r\n  };\r\n\r\n  const selectThread = (threadId) => {\r\n    if (selectedThread === threadId) {\r\n      setSelectedThread(null);\r\n    } else {\r\n      setSelectedThread(threadId);\r\n      \r\n      // Create editor for this thread if it doesn't exist\r\n      if (!editors[threadId]) {\r\n        const newEditor = createEditor();\r\n        setEditors(prev => ({...prev, [threadId]: newEditor}));\r\n      }\r\n      \r\n      // Initialize attachments if needed\r\n      if (!attachments[threadId]) {\r\n        setAttachments(prev => ({...prev, [threadId]: []}));\r\n      }\r\n    }\r\n  };\r\n\r\n  const selectEmailSender = (email) => {\r\n    setActiveEmail(email);\r\n    setShowEmailPanel(true);\r\n  };\r\n\r\n  const getInitials = (from) => {\r\n    const name = from.split('<')[0].trim();\r\n    return name.split(' ').map(word => word[0]).join('').slice(0, 2).toUpperCase();\r\n  };\r\n  \r\n  const appendLocalReply = (threadId, message) => {\r\n    setThreads((prev) =>\r\n      prev.map((t) => {\r\n        if (t.id !== threadId) return t;\r\n        return {\r\n          ...t,\r\n          messages: [...t.messages, message],\r\n        };\r\n      })\r\n    );\r\n  };\r\n\r\n  const sendReply = async (threadId, to, subject) => {\r\n    const editor = editors[threadId];\r\n    if (!editor) return;\r\n    \r\n    const html = editor.getHTML();\r\n    const threadAttachments = attachments[threadId] || [];\r\n    \r\n    try {\r\n      await axios.post('http://localhost:5000/api/reply', {\r\n        threadId,\r\n        to,\r\n        subject,\r\n        message: html,\r\n        draft: false\r\n      }, { withCredentials: true });\r\n\r\n      appendLocalReply(threadId, {\r\n        from: userEmail,\r\n        subject,\r\n        date: new Date().toISOString(),\r\n        body: html,\r\n      });\r\n\r\n      alert('✅ Reply sent!');\r\n      editor.commands.setContent('');\r\n      \r\n      // Clear attachments for this thread\r\n      setAttachments(prev => ({\r\n        ...prev,\r\n        [threadId]: []\r\n      }));\r\n      \r\n    } catch (err) {\r\n      console.error('❌ Reply failed:', err);\r\n      alert('Failed to send reply.');\r\n    }\r\n  };\r\n  \r\n  const saveDraft = async (threadId, to, subject) => {\r\n    const editor = editors[threadId];\r\n    if (!editor) return;\r\n    \r\n    const html = editor.getHTML();\r\n    \r\n    try {\r\n      await axios.post('http://localhost:5000/api/reply', {\r\n        threadId,\r\n        to,\r\n        subject,\r\n        message: html,\r\n        draft: true\r\n      }, { withCredentials: true });\r\n\r\n      alert('✅ Draft saved!');\r\n      \r\n    } catch (err) {\r\n      console.error('❌ Draft save failed:', err);\r\n      alert('Failed to save draft.');\r\n    }\r\n  };\r\n\r\n  const handleFileAttachment = (threadId, files) => {\r\n    setAttachments(prev => ({\r\n      ...prev,\r\n      [threadId]: [...(prev[threadId] || []), ...Array.from(files)]\r\n    }));\r\n  };\r\n  \r\n  const removeAttachment = (threadId, index) => {\r\n    setAttachments(prev => {\r\n      const newAttachments = [...prev[threadId]];\r\n      newAttachments.splice(index, 1);\r\n      return { ...prev, [threadId]: newAttachments };\r\n    });\r\n  };\r\n\r\n  // Filter threads based on search and active email\r\n  const filteredThreads = threads\r\n    .filter(thread => \r\n      !activeEmail || thread.messages.some(msg => msg.from.includes(activeEmail))\r\n    )\r\n    .filter(thread =>\r\n      !search || \r\n      thread.subject?.toLowerCase().includes(search.toLowerCase()) ||\r\n      thread.messages?.some(msg =>\r\n        msg.from?.toLowerCase().includes(search.toLowerCase()) ||\r\n        msg.body?.toLowerCase().includes(search.toLowerCase())\r\n      )\r\n    );\r\n\r\n  return (\r\n    <div className=\"email-thread-manager\" style={{ \r\n      padding: '20px', \r\n      fontFamily: 'Arial, sans-serif',\r\n      maxWidth: '1200px',\r\n      margin: '0 auto'\r\n    }}>\r\n      {profile && (\r\n        <div style={{\r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          marginBottom: '20px', \r\n          padding: '10px',\r\n          backgroundColor: '#f0f0f0', \r\n          borderRadius: '8px'\r\n        }}>\r\n          <img src={profile.picture} alt=\"avatar\" style={{ borderRadius: '50%', width: 40, height: 40, marginRight: 12 }} />\r\n          <div>\r\n            <div><strong>{profile.name}</strong></div>\r\n            <div style={{ fontSize: '0.9em', color: '#666' }}>{profile.email}</div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"🔍 Search all threads...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          style={{ padding: '10px', width: '100%', marginBottom: '10px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n        />\r\n\r\n        <div style={{ display: 'flex', gap: '10px', marginBottom: '10px' }}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Add email to follow...\"\r\n            value={emailInput}\r\n            onChange={(e) => setEmailInput(e.target.value)}\r\n            style={{ padding: '10px', flex: 1, borderRadius: '8px', border: '1px solid #ccc' }}\r\n          />\r\n          <button\r\n            onClick={handleAddEmail}\r\n            style={{ padding: '10px', backgroundColor: '#2196f3', color: 'white', border: 'none', borderRadius: '6px', cursor: 'pointer' }}\r\n          >\r\n            Add Email\r\n          </button>\r\n        </div>\r\n\r\n        <div style={{ \r\n          display: 'flex', \r\n          flexWrap: 'wrap', \r\n          gap: '8px', \r\n          marginTop: '10px' \r\n        }}>\r\n          {followEmails.map((email, index) => (\r\n            <div key={index} style={{ \r\n              display: 'flex',\r\n              alignItems: 'center'\r\n            }}>\r\n              <button \r\n                onClick={() => selectEmailSender(email)}\r\n                style={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center',\r\n                  backgroundColor: activeEmail === email ? '#2196f3' : '#e3f2fd', \r\n                  color: activeEmail === email ? 'white' : 'black',\r\n                  borderRadius: '20px', \r\n                  padding: '8px 15px',\r\n                  border: '1px solid #bbdefb',\r\n                  cursor: 'pointer',\r\n                  fontWeight: activeEmail === email ? 'bold' : 'normal'\r\n                }}\r\n              >\r\n                📧 {email}\r\n              </button>\r\n              <button \r\n                onClick={() => setFollowEmails(prev => prev.filter((_, i) => i !== index))}\r\n                style={{ \r\n                  marginLeft: '5px', \r\n                  background: 'none', \r\n                  border: 'none', \r\n                  cursor: 'pointer',\r\n                  color: '#f44336',\r\n                  fontWeight: 'bold',\r\n                  fontSize: '16px'\r\n                }}\r\n              >\r\n                ×\r\n              </button>\r\n            </div>\r\n          ))}\r\n          <button\r\n            onClick={() => {\r\n              setActiveEmail(null);\r\n              setShowEmailPanel(true);\r\n            }}\r\n            style={{ \r\n              display: 'flex', \r\n              alignItems: 'center',\r\n              backgroundColor: activeEmail === null && showEmailPanel ? '#2196f3' : '#e0e0e0', \r\n              color: activeEmail === null && showEmailPanel ? 'white' : 'black',\r\n              borderRadius: '20px', \r\n              padding: '8px 15px',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontWeight: activeEmail === null && showEmailPanel ? 'bold' : 'normal'\r\n            }}\r\n          >\r\n            📧 All Emails\r\n          </button>\r\n          <button\r\n            onClick={() => setShowEmailPanel(!showEmailPanel)}\r\n            style={{ \r\n              backgroundColor: showEmailPanel ? '#f44336' : '#4caf50', \r\n              color: 'white',\r\n              borderRadius: '20px', \r\n              padding: '8px 15px',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              marginLeft: 'auto'\r\n            }}\r\n          >\r\n            {showEmailPanel ? '✕ Close Email Panel' : '✓ Open Email Panel'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showEmailPanel && (\r\n        <div style={{ display: 'flex', gap: '20px' }}>\r\n          {/* Threads List */}\r\n          <div style={{ \r\n            width: '300px', \r\n            borderRight: '1px solid #e0e0e0',\r\n            padding: '0 15px 15px 0',\r\n            overflowY: 'auto',\r\n            maxHeight: '80vh'\r\n          }}>\r\n            <h3>Email Threads {activeEmail ? `from ${activeEmail}` : ''}</h3>\r\n            \r\n            {filteredThreads.length > 0 ? (\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\r\n                {filteredThreads.map((thread) => (\r\n                  <div \r\n                    key={thread.id}\r\n                    onClick={() => selectThread(thread.id)}\r\n                    style={{\r\n                      padding: '10px',\r\n                      borderRadius: '8px',\r\n                      border: selectedThread === thread.id ? '2px solid #2196f3' : '1px solid #ddd',\r\n                      backgroundColor: selectedThread === thread.id ? '#e3f2fd' : '#f5f5f5',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                  >\r\n                    <div style={{ fontWeight: 'bold', marginBottom: '5px' }}>\r\n                      {thread.subject || '(no subject)'}\r\n                    </div>\r\n                    <div style={{ fontSize: '0.8em', color: '#666' }}>\r\n                      From: {thread.messages[0].from.split('<')[0].trim()}\r\n                    </div>\r\n                    <div style={{ fontSize: '0.8em', color: '#666' }}>\r\n                      {thread.messages.length} message{thread.messages.length !== 1 ? 's' : ''} • \r\n                      Last activity: {new Date(thread.messages[thread.messages.length - 1].date).toLocaleString()}\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div style={{ textAlign: 'center', padding: '20px', color: '#666' }}>\r\n                {followEmails.length > 0 ? \r\n                  'No matching threads found.' : \r\n                  'Add an email address to follow.'}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Thread Content */}\r\n          <div style={{ flex: 1 }}>\r\n            {selectedThread ? (\r\n              (() => {\r\n                const thread = threads.find(t => t.id === selectedThread);\r\n                if (!thread) return <div>Thread not found</div>;\r\n                \r\n                const editor = editors[selectedThread];\r\n                const threadAttachments = attachments[selectedThread] || [];\r\n                let lastDateLabel = '';\r\n                \r\n                return (\r\n                  <div style={{ \r\n                    border: '1px solid #e0e0e0',\r\n                    borderRadius: '8px',\r\n                    padding: '15px'\r\n                  }}>\r\n                    <h2 style={{ borderBottom: '1px solid #e0e0e0', paddingBottom: '10px' }}>\r\n                      {thread.subject || '(no subject)'}\r\n                    </h2>\r\n                    \r\n                    <div style={{ \r\n                      maxHeight: '400px', \r\n                      overflowY: 'auto', \r\n                      padding: '10px',\r\n                      marginBottom: '20px',\r\n                      border: '1px solid #f0f0f0',\r\n                      borderRadius: '8px'\r\n                    }}>\r\n                      {thread.messages.map((msg, i) => {\r\n                        const dateLabel = getDateLabel(msg.date);\r\n                        const showDateLabel = dateLabel !== lastDateLabel;\r\n                        lastDateLabel = dateLabel;\r\n                        \r\n                        const isMe = msg.from.includes(userEmail);\r\n                        \r\n                        return (\r\n                          <div key={i} style={{ display: 'flex', flexDirection: 'column', marginBottom: '15px' }}>\r\n                            {showDateLabel && (\r\n                              <div style={{\r\n                                textAlign: 'center', \r\n                                margin: '15px 0 5px', \r\n                                color: '#666', \r\n                                fontSize: '0.85em', \r\n                                fontWeight: 'bold'\r\n                              }}>\r\n                                ── {dateLabel} ──\r\n                              </div>\r\n                            )}\r\n                            <div style={{\r\n                              display: 'flex', \r\n                              flexDirection: isMe ? 'row-reverse' : 'row', \r\n                              alignSelf: isMe ? 'flex-end' : 'flex-start',\r\n                              maxWidth: '75%', \r\n                              backgroundColor: isMe ? '#dcf8c6' : '#fff', \r\n                              padding: '10px', \r\n                              borderRadius: '10px',\r\n                              margin: '5px 0', \r\n                              border: isMe ? '1px solid #a2d5a2' : '1px solid #ccc',\r\n                              boxShadow: '0 1px 3px rgba(0,0,0,0.05)', \r\n                              textAlign: isMe ? 'right' : 'left'\r\n                            }}>\r\n                              <div style={{\r\n                                backgroundColor: isMe ? '#4caf50' : '#888', \r\n                                color: '#fff', \r\n                                borderRadius: '50%',\r\n                                width: '36px', \r\n                                height: '36px', \r\n                                display: 'flex', \r\n                                alignItems: 'center', \r\n                                justifyContent: 'center',\r\n                                fontWeight: 'bold', \r\n                                fontSize: '0.9em', \r\n                                margin: isMe ? '0 0 0 10px' : '0 10px 0 0'\r\n                              }}>\r\n                                {isMe ? 'You' : getInitials(msg.from)}\r\n                              </div>\r\n                              <div style={{ flex: 1 }}>\r\n                                <div style={{ fontWeight: 'bold' }}>{isMe ? 'You' : msg.from}</div>\r\n                                <div style={{ marginTop: '6px', marginBottom: '8px' }}\r\n                                  dangerouslySetInnerHTML={{ __html: cleanBody(msg.body) }} />\r\n                                <div style={{ fontSize: '0.8em', color: '#888' }}>{new Date(msg.date).toLocaleString()}</div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                    \r\n                    <div style={{ \r\n                      border: '1px solid #e0e0e0',\r\n                      borderRadius: '8px',\r\n                      padding: '15px'\r\n                    }}>\r\n                      <h3 style={{ marginTop: 0 }}>Reply</h3>\r\n                      \r\n                      {editor && (\r\n                        <div style={{ marginBottom: '10px', display: 'flex', gap: '5px', flexWrap: 'wrap' }}>\r\n                          <button\r\n                            onClick={() => editor.chain().focus().toggleBold().run()}\r\n                            style={{ \r\n                              fontWeight: 'bold', \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('bold') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >B</button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleItalic().run()} \r\n                            style={{ \r\n                              fontStyle: 'italic',\r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('italic') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >I</button>\r\n                          <button \r\n                            onClick={() => editor.chain().focus().toggleBulletList().run()}\r\n                            style={{ \r\n                              padding: '5px 10px',\r\n                              borderRadius: '4px',\r\n                              border: '1px solid #ccc',\r\n                              backgroundColor: editor.isActive('bulletList') ? '#e3f2fd' : '#fff'\r\n                            }}\r\n                          >• List</button>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {editor && (\r\n                        <EditorContent \r\n                          editor={editor} \r\n                          className=\"tiptap-editor\"\r\n                          style={{\r\n                            border: '1px solid #ccc',\r\n                            borderRadius: '6px',\r\n                            minHeight: '150px',\r\n                            padding: '10px',\r\n                            marginBottom: '10px'\r\n                          }}\r\n                        />\r\n                      )}\r\n                      \r\n                      <div style={{ margin: '10px 0' }}>\r\n                        <label style={{ fontSize: '0.9em', fontWeight: 'bold' }}>📎 Attach files:\r\n                          <input \r\n                            type=\"file\" \r\n                            multiple\r\n                            onChange={(e) => handleFileAttachment(selectedThread, e.target.files)} \r\n                            style={{ display: 'block', marginTop: '6px' }} \r\n                          />\r\n                        </label>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap', marginTop: '10px', gap: '10px' }}>\r\n                          {threadAttachments.map((file, index) => (\r\n                            <div key={index} style={{ \r\n                              border: '1px solid #ccc', \r\n                              borderRadius: '4px', \r\n                              padding: '4px 8px', \r\n                              background: '#f0f0f0',\r\n                              display: 'flex',\r\n                              alignItems: 'center'\r\n                            }}>\r\n                              <span style={{ marginRight: '5px' }}>📄</span>\r\n                              {file.name}\r\n                              <button \r\n                                onClick={() => removeAttachment(selectedThread, index)} \r\n                                style={{ \r\n                                  marginLeft: '8px', \r\n                                  color: 'red', \r\n                                  background: 'none', \r\n                                  border: 'none', \r\n                                  cursor: 'pointer',\r\n                                  fontSize: '16px',\r\n                                  fontWeight: 'bold'\r\n                                }}\r\n                              >×</button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div style={{ display: 'flex', gap: '10px', marginTop: '15px' }}>\r\n                        <button\r\n                          onClick={() => sendReply(selectedThread, thread.messages[0].from, thread.subject)}\r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#4caf50', \r\n                            color: '#fff', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '5px'\r\n                          }}\r\n                        >\r\n                          <span style={{ fontSize: '1.2em' }}>✉️</span>\r\n                          Send Reply\r\n                        </button>\r\n                        <button\r\n                          onClick={() => saveDraft(selectedThread, thread.messages[0].from, thread.subject)}\r\n                          style={{ \r\n                            padding: '8px 16px', \r\n                            backgroundColor: '#ff9800', \r\n                            color: '#fff', \r\n                            border: 'none', \r\n                            borderRadius: '6px', \r\n                            cursor: 'pointer',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: '5px'\r\n                          }}\r\n                        >\r\n                          <span style={{ fontSize: '1.2em' }}>💾</span>\r\n                          Save Draft\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })()\r\n            ) : (\r\n              <div style={{ \r\n                textAlign: 'center', \r\n                padding: '40px', \r\n                backgroundColor: '#f5f5f5', \r\n                borderRadius: '10px',\r\n                border: '1px dashed #ccc'\r\n              }}>\r\n                <h3>Select a thread to view</h3>\r\n                <p>Click on any email thread from the list to view its contents and reply.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {!showEmailPanel && (\r\n        <div style={{ \r\n          textAlign: 'center', \r\n          padding: '40px', \r\n          backgroundColor: '#f5f5f5', \r\n          borderRadius: '10px',\r\n          border: '1px dashed #ccc'\r\n        }}>\r\n          {followEmails.length > 0 ? (\r\n            <>\r\n              <h3>Your Email Interface</h3>\r\n              <p>Click the \"Open Email Panel\" button above to view and manage your emails.</p>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <h3>No Emails Configured</h3>\r\n              <p>Add an email address to follow above, then open the email panel.</p>\r\n            </>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}